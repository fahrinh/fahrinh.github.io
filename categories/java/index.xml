<rss xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Java - Category - Fahri NH</title><link>https://fahri.id/categories/java/</link><description>Java - Category - Fahri NH</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Wed, 08 Nov 2017 04:42:36 +0700</lastBuildDate><atom:link href="https://fahri.id/categories/java/" rel="self" type="application/rss+xml"/><item><title>Java: How To Autodetect The Charset Encoding of A Text File and Remove Byte Order Mark (BOM)</title><link>https://fahri.id/posts/java-how-to-autodetect-the-charset/</link><pubDate>Wed, 08 Nov 2017 04:42:36 +0700</pubDate><author><name>Fahri</name></author><guid>https://fahri.id/posts/java-how-to-autodetect-the-charset/</guid><description><![CDATA[<h2 id="tldr" class="headerLink">
    <a href="#tldr" class="header-mark"></a>TLDR;</h2><p>Required dependencies (<code>pom.xml</code>) :</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-xml" data-lang="xml"><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;groupId&gt;</span>com.ibm.icu<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;artifactId&gt;</span>icu4j<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&lt;version&gt;</span>60.1<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;dependency&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;groupId&gt;</span>commons-io<span class="nt">&lt;/groupId&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;artifactId&gt;</span>commons-io<span class="nt">&lt;/artifactId&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nt">&lt;version&gt;</span>2.6<span class="nt">&lt;/version&gt;</span>
</span></span><span class="line"><span class="cl"><span class="nt">&lt;/dependency&gt;</span>
</span></span></code></pre></div><p>Autodetect the charset encoding of a text file or input stream then &lsquo;remove&rsquo; (skip) Byte Order Mark (BOM) while reading based on detected charset  :</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="n">File</span> <span class="n">inputFile</span> <span class="o">=</span> <span class="k">new</span> <span class="n">File</span><span class="o">(</span><span class="s">&#34;/Users/fahri/Downloads/UNKNOWN_TEXT.txt&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">BOMInputStream</span> <span class="n">bomInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BOMInputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">BufferedInputStream</span><span class="o">(</span><span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="n">inputFile</span><span class="o">)),</span>
</span></span><span class="line"><span class="cl">        <span class="n">ByteOrderMark</span><span class="o">.</span><span class="na">UTF_8</span><span class="o">,</span> <span class="n">ByteOrderMark</span><span class="o">.</span><span class="na">UTF_16BE</span><span class="o">,</span> <span class="n">ByteOrderMark</span><span class="o">.</span><span class="na">UTF_16LE</span><span class="o">,</span> <span class="n">ByteOrderMark</span><span class="o">.</span><span class="na">UTF_32BE</span><span class="o">,</span> <span class="n">ByteOrderMark</span><span class="o">.</span><span class="na">UTF_32LE</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;HAS BOM : &#34;</span> <span class="o">+</span> <span class="n">bomInputStream</span><span class="o">.</span><span class="na">hasBOM</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">CharsetDetector</span> <span class="n">detector</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CharsetDetector</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">detector</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">bomInputStream</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">CharsetMatch</span> <span class="n">charsetMatch</span> <span class="o">=</span> <span class="n">detector</span><span class="o">.</span><span class="na">detect</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&#34;CHARSET MATCH : &#34;</span> <span class="o">+</span> <span class="n">charsetMatch</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">BufferedReader</span> <span class="n">br</span> <span class="o">=</span> <span class="k">new</span> <span class="n">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="n">InputStreamReader</span><span class="o">(</span><span class="n">bomInputStream</span><span class="o">,</span> <span class="n">charsetMatch</span><span class="o">.</span><span class="na">getName</span><span class="o">()));</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">line</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span> <span class="n">line</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">;</span> <span class="n">line</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">line</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span><span class="line"><span class="cl"><span class="n">br</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</span></span></code></pre></div>]]></description></item></channel></rss>